Ответы на вопросы к ДЗ "3.2. Работа в терминале, лекция 2"


1. Ответ:  Команда cd это команда это встроенная в bash команда (builtin). Если бы это была внешняя команда, то bash не смог бы изменить свой рабочий каталог, в котором на данный момент исполняется, так как при вызове внешней команды, управление передается ей и после ее выполнения, управление возвращается оболочке bash. Таким образом, если бы cd была внешней командой и с ее помощью мы бы попытались изменить рабочий каталог, то после ее завершения для bash ничего бы не изменилось.


2. Ответ: альтернативой команде grep <some_string> <some_file> | wc -l является использование флага -c в самой команде grep (он позволяет подсчитать количество строк, содержащих последовательность симоволов, подпадающих под условие заданное в команде grep.


3. Ответ: процесс, являющийся родителем для всех процессов в Ubuntu 20.04 и имеющий PID 1 - это процесс systemd.



4. Ответ: ls 2>/dev/pts/1



5. Ответ: grep 12 0<test1 1>test2. Здесь test1 и test2 - это файлы. В файле test1 записано следующее:
vagrant@vagrant:~/test$ cat test1
123
 1

Файл test2 пустой. Теперь после выполнения команды grep 12 0<test1 1>test2 во втором файле появится строка 123:

vagrant@vagrant:~/test$ grep 12 0<test1 1>test2
vagrant@vagrant:~/test$ cat test2
123


6. Ответ: находясь в графическом режиме нельзя вывести данные в какой-либо TTY, так как графическая оболочка взаимодействует с PTY.



7. Ответ: команда bash 5>&1 связывает дескриптор 5 с stdout. В то время как результат выполнения команды:

vagrant@vagrant:~$ echo netology > /proc/$$/fd/5
netology

Это происходит потому, что файл в директории /proc/$$/fd/5 имеет зависимость с /dev/pts/0, то есть с окном терминала (stdout, что было создано с помощью предыдущей команды).



8. Ответ: поменять местами стандартные потоки можно например следующим образом: echo 123 5>&1 1>&2 2>&5 | grep 1. При этом grep не может отфильтровать вывод по 1, так как на вход grep поступает stderr. Происходит это потому, что сначала промежуточный дескриптор связывается со stdout, потом stdout перенаправляется на stderr, и наконец stderr перенаправляется на файловый дескриптор 5, которыйуказывает на stdout.


9. Ответ: команда cat /proc/$$/environ выведет на экран все переменные окружения. Аналогичный вывод можно получить просто набрав в терминале команду env



10. Ответ: файл /proc/<PID>/cmdline - только для чтения, содержит в себе законченную строку с командой для указанного процесса.

файл /proc/<PID>/exe - этот файл содержит в себе символьную ссылку на путь выполненной команды для указанного процесса.



11. Ответ: судя по выводу команды - это SSE4.2



12. Ответ: у меня при аналогичной команде наблюдается следующее:

vagrant@vagrant:~$ ssh localhost 'tty' \n
vagrant@localhost's password:


14. Ответ: команда tee читает содержимое из stdin и записывает его в stdout и в указанный файл. Команда echo не работает для записи в каталог /root из под локального пользователя потому что команда echo - встроенная в bash (builtin), а сам экземпляр bash запущен из под локального пользователя, у которого нет прав для доступа к каталогу /root. А команда tee является внешней и если ее запускать с параметром sudo, то для на нее будут распространяться права суперпользователя и файл в каталоге /root успешно запишется.




