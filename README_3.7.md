1. Ответ: список сетевых интерфейсов на ВМ Ubuntu:

```bash
vagrant@vagrant:~$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:73:60:cf brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
       valid_lft 82873sec preferred_lft 82873sec
    inet6 fe80::a00:27ff:fe73:60cf/64 scope link
       valid_lft forever preferred_lft forever

```

На компьютере windows:

```
C:\Users\vfkuhtenko>ipconfig /all

Настройка протокола IP для Windows

   Имя компьютера  . . . . . . . . . : SC-
   Основной DNS-суффикс  . . . . . . : corp.ru
   Тип узла. . . . . . . . . . . . . : Гибридный
   IP-маршрутизация включена . . . . : Нет
   WINS-прокси включен . . . . . . . : Нет
   
Адаптер Ethernet Ethernet:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . : corp.ru
   Описание. . . . . . . . . . . . . : Intel(R) Ethernet Connection (10) I219-LM
   Физический адрес. . . . . . . . . : 38-14-28-08-C7-A6
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да

Адаптер Ethernet VirtualBox Host-Only Network:

   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
   Физический адрес. . . . . . . . . : 0A-00-27-00-00-16
   DHCP включен. . . . . . . . . . . : Нет
   Автонастройка включена. . . . . . : Да
   Локальный IPv6-адрес канала . . . : fe80::5dc6:4b10:db82:c562%22(Основной)
   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1(Основной)
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :
   IAID DHCPv6 . . . . . . . . . . . : 1225392167
   DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-28-3F-B0-F9-38-14-28-08-C7-A6
   NetBios через TCP/IP. . . . . . . . : Отключен

Адаптер беспроводной локальной сети Подключение по локальной сети* 1:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter
   Физический адрес. . . . . . . . . : B0-60-88-22-CA-D7
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да

Адаптер беспроводной локальной сети Подключение по локальной сети* 10:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #2
   Физический адрес. . . . . . . . . : B2-60-88-22-CA-D6
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да


Адаптер беспроводной локальной сети Беспроводная сеть:

   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : Intel(R) Wi-Fi 6 AX201 160MHz
   Физический адрес. . . . . . . . . : B0-60-88-22-CA-D6
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да
   IPv4-адрес. . . . . . . . . . . . : 192.168.1.111(Основной)
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Аренда получена. . . . . . . . . . : 5 декабря 2021 г. 8:34:06
   Срок аренды истекает. . . . . . . . . . : 6 декабря 2021 г. 20:34:16
   Основной шлюз. . . . . . . . . : 192.168.1.1
   DHCP-сервер. . . . . . . . . . . : 192.168.1.1
   DNS-серверы. . . . . . . . . . . : 10.6.120.1
                                       10.6.120.2
                                       192.168.1.1
   NetBios через TCP/IP. . . . . . . . : Отключен

Адаптер Ethernet Сетевое подключение Bluetooth:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
   Описание. . . . . . . . . . . . . : Bluetooth Device (Personal Area Network)
   Физический адрес. . . . . . . . . : B0-60-88-22-CA-DA
   DHCP включен. . . . . . . . . . . : Да
   Автонастройка включена. . . . . . : Да

C:\Users\vfkuhtenko>

```

2. Ответ: для распознавания соседа и получения информации по нему (номер порта, ID и т.д.), используется протокол LLDP (между устройствами CISCO можно использовать CDP).

В Linux можно установить пакет lldpd (apt-get install lldpd), после чего его активировать и включить в автозагрузку (systemctl enable lldpd && systemctl start lldpd).
Посмотреть список соседей можно командой: lldpctl

```bash
root@vagrant:~# lldpctl
-------------------------------------------------------------------------------
LLDP neighbors:
-------------------------------------------------------------------------------
root@vagrant:~#

```
Однако на данный момент на указанной ВМ нет устройств-соседей, которые могли бы отдавать ей информацию по LLDP.


3. Ответ: технология разделения L2 коммутатора на несколько виртуальных сетей (или коммутаторов) называется VLAN (virtual LAN). 
В Linux есть пакет, который устанавливается с помощью: apt install vlan. Далее можно настроить VNI (vlan network interface) на сервере Linux и отправлять/принимать трафик в определенном VLAN, настройка производится в файле /etc/network/interfaces. Пример настройки:

```bash
auto vlan100
iface vlan100 inet static
        address 10.124.1.5
        netmask 255.255.255.0
        vlan_raw_device eth0
```


4. Ответ: в Linux есть два типа агрегации интерфейсов (LAG) - статическая и динамическая. В Linux логический интерфейс агрегации называется bond. Для получения возможности создания bond интерфейсов и включения в них slave-интерфейсов (физических), необходимо установить пакет ifenslave. 

Для балансировки этот пакет использует обычный алгоритм round-robin.

Пример конфигурации в файле /etc/network/interfaces:

```bash

auto bond0

iface bond0 inet static
    address 10.31.1.5
    netmask 255.255.255.0
    network 10.31.1.0
    gateway 10.31.1.254
    bond-slaves eth0 eth1
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200
```

Возможные алгоритмы балансировки: 
- round robin; 
- балансировка на основе hash, который может расчитываться разными способами, например сложением по модулю 2 адреса источника с адресом назначения (имеется ввиду MAC адреса), также можно использовать расчет хэша по заголовкам верхних уровней (порт источника, порт назначения, IP адрес источника, IP адрес назначения);   
- балансировка на основе загруженности линков;
- адаптивная балансировка;

5. Ответ: всего IP адресов в сети с маской /29 - 8: 1 - адрес сети, 1 - бродкаст адрес, 6 адресов выделяемых на хосты в этой подсети, итого 8 адресов.

Из сети с маской /24 можно получить 32 подсети с маской /29.
Пример для случая 10.10.10.0/24:

- 10.10.10.0/29
- 10.10.10.8/29
- 10.10.10.16/29

и так далее.


6. Ответ: В описанной ситуации допустимо взять IP адреса для стыка из диапазона CG NAT (RFC 6598) - 100.64.0.0/10.
Однако для 40-50 хостов внутри подсети, достаточно из всего этого диапазона выбрать подсеть с длиной маски не более /26. Например можно взять подсеть: 100.66.2.64/26. В этой подсети будет доступно 62 IP адреса для хостов.


7. Ответ: проверка ARP таблицы в Linux:

```bash
root@vagrant:~# ip neigh
10.0.2.3 dev eth0 lladdr 52:54:00:12:35:03 STALE
10.0.2.2 dev eth0 lladdr 52:54:00:12:35:02 DELAY
```

проверка ARP таблицы в Windows:

```
C:\Users\vfkuhtenko>arp -a

Интерфейс: 192.168.1.111 --- 0x9
  адрес в Интернете      Физический адрес      Тип
  192.168.1.1           88-d7-f6-64-3d-d0     динамический
  192.168.1.167         70-2a-d5-f2-01-d8     динамический
  224.0.0.22            01-00-5e-00-00-16     статический
  224.0.0.251           01-00-5e-00-00-fb     статический
  224.0.0.252           01-00-5e-00-00-fc     статический
  239.255.255.250       01-00-5e-7f-ff-fa     статический
  239.255.255.253       01-00-5e-7f-ff-fd     статический
  255.255.255.255       ff-ff-ff-ff-ff-ff     статический

```

Очистка арп кеша в Linux:

```bash
root@vagrant:~# ip neigh flush all
```

Очистка арп кеша в Windows:

```
netsh interface ip delete arpcache
```

Удаление одного IP windows:

```
arp -d <IP addr to be deleted>
```

Удаление одного IP в Linux:

```bash
arp -d <IP addr to be deleted>
```
